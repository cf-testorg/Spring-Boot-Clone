<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.springframework.bootstrap</groupId>
		<artifactId>spring-bootstrap-parent</artifactId>
		<version>0.5.0.BUILD-SNAPSHOT</version>
	</parent>
	<artifactId>spring-bootstrap-samples</artifactId>
	<packaging>pom</packaging>
	<modules>
		<module>spring-bootstrap-sample</module>
		<module>spring-bootstrap-actuator-sample</module>
		<module>spring-bootstrap-batch-sample</module>
		<module>spring-bootstrap-data-sample</module>
		<module>spring-bootstrap-integration-sample</module>
		<module>spring-bootstrap-jetty-sample</module>
		<module>spring-bootstrap-simple-sample</module>
		<module>spring-bootstrap-tomcat-sample</module>
		<module>spring-bootstrap-profile-sample</module>
		<module>spring-bootstrap-trad-sample</module>
		<module>spring-bootstrap-ui-sample</module>
		<module>spring-bootstrap-xml-sample</module>
	</modules>
	<build>
		<pluginManagement>
			<plugins>
				<plugin>
					<artifactId>maven-dependency-plugin</artifactId>
					<executions>
						<execution>
							<id>unpack</id>
							<phase>prepare-package</phase>
							<inherited>true</inherited>
							<goals>
								<goal>unpack</goal>
							</goals>
							<configuration>
								<artifactItems>
									<artifactItem>
										<groupId>${project.groupId}</groupId>
										<artifactId>spring-bootstrap-launcher</artifactId>
										<version>${project.version}</version>
										<type>jar</type>
									</artifactItem>
								</artifactItems>
								<outputDirectory>${project.build.directory}/assembly</outputDirectory>
							</configuration>
						</execution>
						<execution>
							<id>copy</id>
							<phase>prepare-package</phase>
							<inherited>true</inherited>
							<goals>
								<goal>copy-dependencies</goal>
							</goals>
							<configuration>
								<outputDirectory>${project.build.directory}/assembly/lib</outputDirectory>
								<scope>runtime</scope>
							</configuration>
						</execution>
					</executions>
				</plugin>
				<plugin>
					<artifactId>maven-assembly-plugin</artifactId>
					<configuration>
						<descriptors>
							<descriptor>${project.parent.basedir}/src/main/assembly/jar-with-dependencies.xml</descriptor>
						</descriptors>
						<archive>
							<manifest>
								<mainClass>org.springframework.bootstrap.launcher.JarLauncher</mainClass>
							</manifest>
							<manifestEntries>
								<Start-Class>${start-class}</Start-Class>
							</manifestEntries>
						</archive>
					</configuration>
					<executions>
						<execution>
							<id>jar-with-dependencies</id>
							<phase>package</phase>
							<inherited>true</inherited>
							<goals>
								<goal>single</goal>
							</goals>
						</execution>
					</executions>
				</plugin>
				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-shade-plugin</artifactId>
					<dependencies>
						<dependency>
							<groupId>${project.groupId}</groupId>
							<artifactId>spring-bootstrap</artifactId>
							<version>${project.version}</version>
						</dependency>
					</dependencies>
					<configuration>
						<createDependencyReducedPom>true</createDependencyReducedPom>
						<filters>
							<filter>
								<artifact>*:*</artifact>
								<excludes>
									<exclude>META-INF/*.SF</exclude>
									<exclude>META-INF/*.DSA</exclude>
									<exclude>META-INF/*.RSA</exclude>
								</excludes>
							</filter>
						</filters>
					</configuration>
					<executions>
						<execution>
							<phase>package</phase>
							<goals>
								<goal>shade</goal>
							</goals>
							<configuration>
								<transformers>
									<transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
										<resource>META-INF/spring.handlers</resource>
									</transformer>
									<transformer implementation="org.springframework.bootstrap.maven.PropertiesMergingResourceTransformer">
										<resource>META-INF/spring.factories</resource>
									</transformer>
									<transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
										<resource>META-INF/spring.schemas</resource>
									</transformer>
									<transformer implementation="org.apache.maven.plugins.shade.resource.ServicesResourceTransformer" />
									<transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
										<mainClass>${start-class}</mainClass>
									</transformer>
								</transformers>
							</configuration>
						</execution>
					</executions>
				</plugin>
			</plugins>
		</pluginManagement>
        <plugins>
          <plugin>
            <!--skip deploy (these are just samples) -->
            <artifactId>maven-deploy-plugin</artifactId>
            <configuration>
              <skip>true</skip>
            </configuration>
          </plugin>
        </plugins>
	</build>
	<dependencyManagement>
		<dependencies>
          <dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
			<exclusions>
				<exclusion>
					<groupId>commons-logging</groupId>
					<artifactId>commons-logging</artifactId>
				</exclusion>
			</exclusions>
          </dependency>
		</dependencies>
	</dependencyManagement>
	<dependencies>
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <scope>runtime</scope>
      </dependency>
	</dependencies>
</project>
